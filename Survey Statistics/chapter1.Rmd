---
title_meta  : Chapter 1
title       : Survey Statistics
description : Introduction to Survey Statistics

---type:NormalExercise xp:100

## Welcome to an introduction to Survey Statistics

In this course you will learn methods frequently used to manage and analyze survey data. Survey data is used in a variety of fields including Public Health, Economics, Political Science, and Data Science. The US Census, the National Health Interview Survey, The National Health and Nutrition Examination Survey, The California Health Interview Survey, Nielsen Ratings, and Election Polling are some examples of survey datasets. 

R is well suited to handle survey statistics using the "survey" package developed by Thomas Lumley. Lumley's book "Complex Surveys: A guide to Analysis Using R" is the main resource for this course, and it is highly recommended.



*** =instructions
- Run the code that installs and loads the survey package.


*** =sample_code
```{r,eval=FALSE}
install.packages("survey")
library("survey")
```

*** =sct
```{r,eval=FALSE}
# The Submission Correctness Test code
# It takes as input the students workspace, his code and what was printed to the console during the exercise.
# Based on these inputs the SCT returns:
# (i) whether the students code was correct
# (ii) a message to the student to either help him find what was wrong or congratulate him on finding the solution.
success_msg("Well done! Continue!")
```

---type:MultipleChoiceExercise xp:100

## Random Samples

Suppose a school takes a random sample of test scores of their students, and wants to estimate the average score across the school's entire population.

Lets say their are 1000 students at the school and we sample 200 of them. Each student has an equal probability of being selected into the sample.

What is the probability that any one student is sampled?

*** =instructions
- 1/4
- 1/5
- 1/2
- 1/3


*** =hint
What is 200 divided by 1000?


*** =sct
```{r,eval=FALSE}
msg1 = "Nope. Try again"
msg2 = "Well done!"

test_mc(correct = 2, feedback_msgs = c(msg1,msg2,msg1,msg1))
```
---type:NormalExercise xp:100

## Weights

Consider the example from the previous question. Imagine the school wants to estimate the number of students with failing grades.

To extrapolate from the sample to the whole population, one makes each observation in the sample represent a larger number of people. 

*** =instructions
-Already loaded is a dataset with the test scores of 200 students
-Look at the first 5 rows and the structure of the dataset


*** =hint
If you don't remember the head and str functions use ?

*** =pre_exercise_code
```{r eval=FALSE}
schoolkids<-read.csv("childdata.csv")
```

*** =sample_code
```{r eval=FALSE}
# The dataframe schoolkids is already loaded
# Read the first five rows of schoolkids


# Read the structure of schoolkids


```

*** =solution
```{r eval=FALSE}
# The dataframe schoolkids is already loaded
# Read the first five rows of schoolkids
head(schoolkids)

# Read the structure of schoolkids
str(schoolkids)

```

*** =sct
```{r eval=FALSE}
test_object(head(schoolkids), 
            undefined_msg = "Please make sure to print the first 5 rows",
            incorrect_msg = "Please make sure to print the first 5 rows")
test_object(str(schoolkids), undefined_msg="Please look at the structure of the dataset.",
            incorrect_msg="Please look at the structure of the dataset."
success_msg("Great! Head over to the next exercise.")
```

---type:NormalExercise xp:100

## Creating Weights

One of the main concepts of survey statistics is sampling weights. Remember the probability of any student being sampled was 1/5.

That means that if we make each student in the sample represent 5 students, the inverse of the probability of being sampled, then we get an unbiased estimate.

The Horvits-Thompson estimator is used to measure population totals from samples. The formula

*** =instructions
-Add a weight variable to the schoolkids dataframe
-Write a function that 
-Look at the first 5 rows and the structure of the dataset


*** =hint
If you don't remember the head and str functions use ?

*** =pre_exercise_code
```{r eval=FALSE}
schoolkids<-read.csv("childdata.csv")
```

*** =sample_code
```{r eval=FALSE}
# The dataframe schoolkids is already loaded
# Read the first five rows of schoolkids


# Read the structure of schoolkids


```

*** =solution
```{r eval=FALSE}
# The dataframe schoolkids is already loaded
# Read the first five rows of schoolkids
head(schoolkids)

# Read the structure of schoolkids
str(schoolkids)

```

*** =sct
```{r eval=FALSE}
test_object(head(schoolkids), 
            undefined_msg = "Please make sure to print the first 5 rows",
            incorrect_msg = "Please make sure to print the first 5 rows")
test_object(str(schoolkids), undefined_msg="Please look at the structure of the dataset.",
            incorrect_msg="Please look at the structure of the dataset."
success_msg("Great! Head over to the next exercise.")
```